define(["jquery","core/config","core/templates","core/modal_factory","core/modal_events","core/str","core/notification"],function(e,o,t,c,i,n,r){return{init:function(s,a,l,u){var d,m;1==a?(d="hidecourse",m={hide:a,coursename:l}):(d="showcourse",m={coursename:l}),e(".btn-deletecourse").click(function(a){a.preventDefault(),async function(a){var l=await n.get_string("delete_course_modal_title","block_mmquicklink"),u=await c.create({type:c.types.SAVE_CANCEL,title:t.render("block_mmquicklink/modal_deletecourse_title",a),body:t.render("block_mmquicklink/modal_deletecourse_body",a)});u.setSaveButtonText(l),u.getRoot().on(i.save,async function(){var t=await n.get_string("delete_course_success_msg","block_mmquicklink"),c=await n.get_string("delete_course_failed_msg","block_mmquicklink");try{await e.get(o.wwwroot+"/blocks/mmquicklink/delete.php",{id:s}),r.addNotification({message:t,type:"success"}),setTimeout(function(){location.href=o.wwwroot},1e3)}catch(e){r.addNotification({message:c,type:"error"})}}),u.show()}({coursename:l})}),e(".btn-hidecourse, .btn-showcourse").click(function(n){n.preventDefault(),function(n,r){c.create({type:c.types.SAVE_CANCEL,title:t.render("block_mmquicklink/modal_hidecourse_title",r),body:t.render("block_mmquicklink/modal_hidecourse_body",r)}).then(function(t){var c=t.getRoot();c.on(i.save,function(){e.get(o.wwwroot+"/course/ajax/management.php",{courseid:s,action:n,confirm:1,sesskey:o.sesskey}).done(function(){e.get(o.wwwroot+"/blocks/mmquicklink/changevisibility.php",{courseid:s,action:n,confirm:1,sesskey:o.sesskey}).done(function(){location.reload()})})}),t.show()})}(d,m)}),e(".btn-archivecourse").click(function(n){n.preventDefault(),c.create({type:c.types.SAVE_CANCEL,title:t.render("block_mmquicklink/modal_archivecourse_title",m),body:t.render("block_mmquicklink/modal_archivecourse_body",m)}).then(function(t){t.getRoot().on(i.save,function(){e.get(o.wwwroot+"/blocks/mmquicklink/archive.php",{courseid:s,categoryid:u,confirm:1}).done(function(e){location.reload()})}),t.show()})})}}});