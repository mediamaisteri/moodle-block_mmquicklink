define(["jquery","core/config","core/templates","core/modal_factory","core/modal_events","core/str","core/notification"],function(r,s,l,u,a,m,d){return{init:function(c,e,t,o){var n,i;i=1==e?(n="hidecourse",{hide:e,coursename:t}):(n="showcourse",{coursename:t}),r(".btn-deletecourse").click(function(e){var o;e.preventDefault(),o={coursename:t},m.get_strings([{key:"delete_course_modal_title",component:"block_mmquicklink"},{key:"delete_course_success_msg",component:"block_mmquicklink"},{key:"delete_course_failed_msg",component:"block_mmquicklink"}]).then(function(t){u.create({type:u.types.SAVE_CANCEL,title:l.render("block_mmquicklink/modal_deletecourse_title",o),body:l.render("block_mmquicklink/modal_deletecourse_body",o)}).then(function(e){var o=t[0];e.setSaveButtonText(o),e.getRoot().on(a.save,function(){var e=t[1],o=t[2];r.get(s.wwwroot+"/blocks/mmquicklink/delete.php",{id:c}).then(function(){d.addNotification({message:e,type:"success"}),setTimeout(function(){location.href=s.wwwroot},1e3)}).catch(function(e){d.addNotification({message:o,type:"error"})})}),e.show()})})}),r(".btn-hidecourse, .btn-showcourse").click(function(e){var o,t;e.preventDefault(),o=n,t=i,u.create({type:u.types.SAVE_CANCEL,title:l.render("block_mmquicklink/modal_hidecourse_title",t),body:l.render("block_mmquicklink/modal_hidecourse_body",t)}).then(function(e){e.getRoot().on(a.save,function(){r.get(s.wwwroot+"/course/ajax/management.php",{courseid:c,action:o,confirm:1,sesskey:s.sesskey}).done(function(){r.get(s.wwwroot+"/blocks/mmquicklink/changevisibility.php",{courseid:c,action:o,confirm:1,sesskey:s.sesskey}).done(function(){location.reload()})})}),e.show()})}),r(".btn-archivecourse").click(function(e){e.preventDefault(),u.create({type:u.types.SAVE_CANCEL,title:l.render("block_mmquicklink/modal_archivecourse_title",i),body:l.render("block_mmquicklink/modal_archivecourse_body",i)}).then(function(e){e.getRoot().on(a.save,function(){r.get(s.wwwroot+"/blocks/mmquicklink/archive.php",{courseid:c,categoryid:o,confirm:1}).done(function(e){location.reload()})}),e.show()})})}}});